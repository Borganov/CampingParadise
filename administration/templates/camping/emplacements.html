{% extends "camping/base.html" %}
{% load static %}
{% load leaflet_tags %}
{% block content %}
    {% leaflet_js %}
    {% leaflet_css %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <!--Container-->
    <div class="container w-full mx-auto pt-20">

        <div class="w-full px-4 md:px-0 md:mt-8 mb-16 text-gray-800 leading-normal">

            <!--Console Content-->

            <div class="flex flex-wrap">
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-gray-900 border border-gray-800 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-green-600"><i
                                        class="fa fa-wallet fa-2x fa-fw fa-inverse"></i></div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Surface de l'emplacement</h5>
                                <h3 id="area" class="font-bold text-3xl text-gray-600">... <span class="text-green-500"><i
                                        class="fas fa-caret-up"></i></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-gray-900 border border-gray-800 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-orange-600"><i
                                        class="fas fa-users fa-2x fa-fw fa-inverse"></i></div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Bâtiment le plus proche</h5>
                                <h3 id="buidname" class="font-bold text-3xl text-gray-600">... <span class="text-orange-500"><i
                                        class="fas fa-exchange-alt"></i></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-gray-900 border border-gray-800 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-yellow-400"><i
                                        class="fas fa-user-plus fa-2x fa-fw fa-inverse"></i></div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Piscine la plus proche</h5>
                                <h3 id="poolname" class="font-bold text-3xl text-gray-600">...<span class="text-yellow-600"><i
                                        class="fas fa-caret-up"></i></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-gray-900 border border-gray-800 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-gray-500"><i
                                        class="fas fa-server fa-2x fa-fw fa-inverse"></i></div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Nombre d'arbres sur l'emplacement</h5>
                                <h3 id="tree" class="font-bold text-3xl text-gray-600">...</h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-gray-900 border border-gray-800 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-gray-500"><i class="fas fa-tasks fa-2x fa-fw fa-inverse"></i>
                                </div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Distance jusqu'au bâtiment</h5>
                                <h3 id="builddist" class="font-bold text-3xl text-gray-600">...</h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-gray-900 border border-gray-800 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-gray-500"><i class="fas fa-inbox fa-2x fa-fw fa-inverse"></i>
                                </div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Distance jusqu'à la piscine</h5>
                                <h3 id="pooldist" class="font-bold text-3xl text-gray-600">...<span class="text-red-500"><i
                                        class="fas fa-caret-up"></i></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
            </div>

            <!--Divider-->
            <hr class="border-b-2 border-gray-600 my-8 mx-4">

            <div class="flex flex-row flex-wrap flex-grow mt-2">

                <div class="w-full p-3">
                    {% leaflet_map "emplacements" callback="main_map_init" %}
                    <script type="text/javascript">
                        function main_map_init(map, options) {
                            var dataurl = '{% url "emplacementsjson" %}';
                            $.getJSON(dataurl, function (data) {
                                L.geoJson(data, {onEachFeature: onEachFeature}).addTo(map);
                            });
                            document.getElementById("area").innerHTML = {{emplacementobj.area}};
                            document.getElementById("tree").innerHTML = {{emplacementobj.tree_count}};
                            document.getElementById("pooldist").innerHTML = {{emplacementobj.closest_swimmingpool_dist}};
                            document.getElementById("poolname").innerHTML = "{{emplacementobj.closest_swimmingpool_name}}";

                        }

                        function onEachFeature(feature, layer) {
                            layer.on('mouseover', function () {
                                this.setStyle({
                                    'fillColor': '#0000ff'
                                });
                            });


                            layer.on('mouseout', function () {
                                this.setStyle({
                                    'fillColor': '#1b9aff'
                                });
                            });

                            layer.on("click", function (e) {
                                window.location.assign(feature.properties.id);
                            });

                        }
                    </script>
                </div>

            </div>

            <!--/ Console Content-->

        </div>


    </div>

    <!--/container-->
{% endblock %}



